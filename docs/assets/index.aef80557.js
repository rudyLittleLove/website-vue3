import{d as M,s as v,ak as H,o as D,c as A,b as i,w as _,a as r,F as N,r as T,p as j,f as Y,Y as y,e as b,g as f}from"./index.289bf692.js";import{v as $}from"./el-loading.1fc29f17.js";import{E as G}from"./el-image-viewer.f5fde6c2.js";import{E as K,a as P}from"./el-form-item.11763ea7.js";import{E as Z}from"./el-input.345a6e66.js";import{E as J}from"./el-input-number.830f6c0d.js";import{E as Q}from"./el-progress.3c3e78ed.js";import{E as W}from"./el-button.0c3863f2.js";import{A as X,x as O}from"./index.93f89a9b.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.0de585cb.js";import"./index.01972e81.js";import"./typescript.6eccdbdd.js";import"./index.a0207f98.js";import"./aria.6e9bc94f.js";import"./index.ea4d8fa0.js";import"./icon.0d25849f.js";import"./event.6c7ea317.js";import"./index.96323e08.js";const V=u=>{if(u===0||typeof u=="string"&&parseFloat(u)===0)return"0 B";if(u<1||typeof u=="string"&&parseFloat(u)<1)return u+"B";var p=1024,F=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],m=Math.floor(Math.log(u)/Math.log(p)),c=u/Math.pow(p,m);return F[m]?c.toFixed(2)+" "+F[m]:(c/1e3).toFixed(1)+" B"};const h=u=>(j("data-v-7120e461"),u=u(),Y(),u),te={class:"wrapper","element-loading-text":"\u56FE\u7247\u538B\u7F29\u4E2D..."},ae=f("\u9009\u62E9\u5F85\u538B\u7F29\u56FE\u7247"),ue=h(()=>r("div",{class:"el-upload__tip"},"\u56FE\u7247\u5C06\u538B\u7F29\u4E3A image/jpeg \u683C\u5F0F",-1)),le=h(()=>r("div",null,"\u8BF7\u8F93\u51650-1\u4E4B\u95F4\u7684\u6570\u503C\uFF0C\u5982\u679C\u8D85\u51FA\u53D6\u503C\u8303\u56F4\uFF0C\u5C06\u4F1A\u4F7F\u7528\u9ED8\u8BA4\u503C 0.92\u3002",-1)),oe=h(()=>r("div",null,"\u4E0D\u5408\u7406\u503C\u5C06\u4F7F\u7528\u56FE\u7247\u9ED8\u8BA4\u5BBD\u5EA6\uFF0C\u53EA\u8BBE\u7F6E\u5BBD\u5EA6\u65F6\u9AD8\u5EA6\u5C06\u6309\u6BD4\u4F8B\u7F29\u653E",-1)),ie=h(()=>r("div",null,"\u4E0D\u5408\u7406\u503C\u5C06\u4F7F\u7528\u56FE\u7247\u9ED8\u8BA4\u9AD8\u5EA6",-1)),re=h(()=>r("div",{style:{clear:"both",color:"#000000"}},"\u70B9\u51FB\u56FE\u7247\u67E5\u770B\uFF0C\u5DE6\u53F3\u5207\u6362\u5BF9\u6BD4\u539F\u56FE",-1)),ne={class:"img-item-ul"},pe={class:"info-text"},se=f("\u539F\u59CB\u5927\u5C0F\uFF1A"),de={class:"info-text"},me=f("\u538B\u7F29\u8D28\u91CF\uFF1A"),ce={class:"info-text"},_e=f("\u538B\u7F29\u540E\u5927\u5C0F\uFF1A"),Fe=M({__name:"index",setup(u){const p=v([]),F=v([]),m=v(!1),c=v(.2),w=v(""),E=v(""),k=(a,e)=>{p.value=e,m.value=!0,z(a.raw,{quality:c.value,width:~~w.value,height:~~E.value},l=>{let t=S(l,a.name);F.value.push({...a,originSize:V(a.size),size:V(t.size),url:URL.createObjectURL(t),quality:c.value}),m.value=!1})},I=(a,e)=>{p.value=e},U=a=>{p.value.splice(a,1),F.value.splice(a,1)},L=a=>{let e=document.createElement("a");e.setAttribute("download",""),e.setAttribute("href",a.url),e.click()},z=(a,e,l)=>{let t=new FileReader;t.readAsDataURL(a),t.onload=()=>{let s=t.result;R(s,e,l)}},R=(a,e,l)=>{let t=new Image;t.src=a,t.onload=()=>{let s=e.quality,n=e.width||t.width,d=e.height||(e.width?e.width/(t.width/t.height):"")||t.height,g=document.createElement("canvas"),B=g.getContext("2d");g.width=n,g.height=d,B.drawImage(t,0,0,n,d);let x=g.toDataURL("image/jpeg",s);l(x)}},S=(a,e)=>{let l=a.split(","),t=l[0].match(/:(.*?);/)[1],s=atob(l[1]),n=s.length,d=new Uint8Array(n);for(;n--;)d[n]=s.charCodeAt(n);return new File([d],e,{type:t})};return(a,e)=>{const l=W,t=Q,s=J,n=K,d=Z,g=P,B=G,x=$;return H((D(),A("div",te,[i(t,{class:"upload-demo",ref:"upload",action:"","list-type":"picture-card",accept:"image/*","file-list":p.value,"auto-upload":!1,"on-change":k,"on-remove":I},{trigger:_(()=>[i(l,{type:"primary"},{default:_(()=>[ae]),_:1})]),tip:_(()=>[ue]),_:1},8,["file-list"]),i(g,null,{default:_(()=>[i(n,{label:"\u56FE\u7247\u8D28\u91CF"},{default:_(()=>[i(s,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),"controls-position":"right",min:0,max:1,step:.1,placeholder:"\u8BF7\u8F93\u51650-1\u4E4B\u95F4\u7684\u6570\u503C"},null,8,["modelValue","step"]),le]),_:1}),i(n,{label:"\u56FE\u7247\u5BBD\u5EA6"},{default:_(()=>[i(d,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=o=>w.value=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u7406\u50CF\u7D20\u6570\u503C"},null,8,["modelValue"]),oe]),_:1}),i(n,{label:"\u56FE\u7247\u9AD8\u5EA6"},{default:_(()=>[i(d,{modelValue:E.value,"onUpdate:modelValue":e[2]||(e[2]=o=>E.value=o),placeholder:"\u8BF7\u8F93\u5165\u5408\u7406\u50CF\u7D20\u6570\u503C"},null,8,["modelValue"]),ie]),_:1})]),_:1}),re,r("ul",ne,[(D(!0),A(N,null,T(F.value,(o,C)=>(D(),A("li",{class:"img-item",key:C},[i(B,{src:o.url,"preview-src-list":[o.url,p.value[C].url]},null,8,["src","preview-src-list"]),r("div",pe,[se,r("span",null,y(o.originSize),1)]),r("div",de,[me,r("span",null,y(o.quality),1)]),r("div",ce,[_e,r("span",null,y(o.size),1)]),i(l,{type:"primary",icon:b(X),circle:"",onClick:q=>L(o)},null,8,["icon","onClick"]),i(l,{type:"danger",icon:b(O),circle:"",onClick:q=>U(C)},null,8,["icon","onClick"])]))),128))])])),[[x,m.value]])}}});var Re=ee(Fe,[["__scopeId","data-v-7120e461"]]);export{Re as default};
