import{o as w,c as k,a as E,d as Z,s as $,C as Q,j as X,U as ee,ak as oe,b as v,w as y,y as R,p as ae,f as te,v as S,$ as ne,e as P,F as N,r as O,z as j,W as ie,g as le}from"./index.289bf692.js";import{v as ue}from"./el-loading.1fc29f17.js";import{E as re}from"./el-input.345a6e66.js";import{E as se,a as ce}from"./el-select.f94e6760.js";import{E as pe,a as de}from"./el-form-item.11763ea7.js";import{E as fe}from"./el-button.0c3863f2.js";/* empty css                */import{q as me,g as ve,p as ge}from"./index.93f89a9b.js";import{_ as _e}from"./plugin-vue_export-helper.21dcd24c.js";import{E as he}from"./index.0de585cb.js";import"./index.01972e81.js";import"./typescript.6eccdbdd.js";import"./icon.0d25849f.js";import"./event.6c7ea317.js";import"./index.ea4d8fa0.js";import"./index.a0207f98.js";import"./aria.6e9bc94f.js";import"./index.96323e08.js";var we=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};const Ae={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Me=E("path",{fill:"currentColor",d:"m64 448l832-320l-128 704l-446.08-243.328L832 192L242.816 545.472L64 448zm256 512V657.024L512 768L320 960z"},null,-1),ye=[Me];function be(b,I){return w(),k("svg",Ae,ye)}var xe={name:"ep-promotion",render:be};const Ee={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ie=E("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512L340.864 831.872a30.592 30.592 0 0 0 0 42.752a29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),Fe=[Ie];function Ce(b,I){return w(),k("svg",Ee,Fe)}var Le={name:"ep-arrow-right",render:Ce};const Ue={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ke=E("path",{fill:"currentColor",d:"M609.408 149.376L277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0a30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688a29.12 29.12 0 0 0-41.728 0z"},null,-1),Be=[ke];function qe(b,I){return w(),k("svg",Ue,Be)}var De={name:"ep-arrow-left",render:qe},J={exports:{}};(function(b,I){(function(A,n){b.exports=n()})(we,function(){function A(e){var s=[];return e.AMapUI&&s.push(n(e.AMapUI)),e.Loca&&s.push(z(e.Loca)),Promise.all(s)}function n(e){return new Promise(function(s,t){var l=[];if(e.plugins)for(var i=0;i<e.plugins.length;i+=1)a.AMapUI.plugins.indexOf(e.plugins[i])==-1&&l.push(e.plugins[i]);if(u.AMapUI===o.failed)t("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(u.AMapUI===o.notload){u.AMapUI=o.loading,a.AMapUI.version=e.version||a.AMapUI.version,i=a.AMapUI.version;var m=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+i+"/main.js",p.onerror=function(r){u.AMapUI=o.failed,t("\u8BF7\u6C42 AMapUI \u5931\u8D25")},p.onload=function(){if(u.AMapUI=o.loaded,l.length)window.AMapUI.loadUI(l,function(){for(var r=0,_=l.length;r<_;r++){var F=l[r].split("/").slice(-1)[0];window.AMapUI[F]=arguments[r]}for(s();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()});else for(s();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()},m.appendChild(p)}else u.AMapUI===o.loaded?e.version&&e.version!==a.AMapUI.version?t("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):l.length?window.AMapUI.loadUI(l,function(){for(var r=0,_=l.length;r<_;r++){var F=l[r].split("/").slice(-1)[0];window.AMapUI[F]=arguments[r]}s()}):s():e.version&&e.version!==a.AMapUI.version?t("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):c.AMapUI.push(function(r){r?t(r):l.length?window.AMapUI.loadUI(l,function(){for(var _=0,F=l.length;_<F;_++){var d=l[_].split("/").slice(-1)[0];window.AMapUI[d]=arguments[_]}s()}):s()})})}function z(e){return new Promise(function(s,t){if(u.Loca===o.failed)t("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(u.Loca===o.notload){u.Loca=o.loading,a.Loca.version=e.version||a.Loca.version;var l=a.Loca.version,i=a.AMap.version.startsWith("2"),m=l.startsWith("2");if(i&&!m||!i&&m)t("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{i=a.key,m=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+l+"&key="+i,p.onerror=function(r){u.Loca=o.failed,t("\u8BF7\u6C42 AMapUI \u5931\u8D25")},p.onload=function(){for(u.Loca=o.loaded,s();c.Loca.length;)c.Loca.splice(0,1)[0]()},m.appendChild(p)}}else u.Loca===o.loaded?e.version&&e.version!==a.Loca.version?t("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):s():e.version&&e.version!==a.Loca.version?t("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):c.Loca.push(function(r){r?t(r):t()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(o||(o={}));var a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},c={AMap:[],AMapUI:[],Loca:[]},B=[],q=function(e){typeof e=="function"&&(u.AMap===o.loaded?e(window.AMap):B.push(e))};return{load:function(e){return new Promise(function(s,t){if(u.AMap==o.failed)t("");else if(u.AMap==o.notload){var l=e.key,i=e.version,m=e.plugins;l?(window.AMap&&location.host!=="lbs.amap.com"&&t("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),a.key=l,a.AMap.version=i||a.AMap.version,a.AMap.plugins=m||a.AMap.plugins,u.AMap=o.loading,i=document.body||document.head,window.___onAPILoaded=function(r){if(delete window.___onAPILoaded,r)u.AMap=o.failed,t(r);else for(u.AMap=o.loaded,A(e).then(function(){s(window.AMap)}).catch(t);B.length;)B.splice(0,1)[0]()},m=document.createElement("script"),m.type="text/javascript",m.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+a.AMap.version+"&key="+l+"&plugin="+a.AMap.plugins.join(","),m.onerror=function(r){u.AMap=o.failed,t(r)},i.appendChild(m)):t("\u8BF7\u586B\u5199key")}else if(u.AMap==o.loaded)if(e.key&&e.key!==a.key)t("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(e.version&&e.version!==a.AMap.version)t("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(l=[],e.plugins)for(i=0;i<e.plugins.length;i+=1)a.AMap.plugins.indexOf(e.plugins[i])==-1&&l.push(e.plugins[i]);l.length?window.AMap.plugin(l,function(){A(e).then(function(){s(window.AMap)}).catch(t)}):A(e).then(function(){s(window.AMap)}).catch(t)}else if(e.key&&e.key!==a.key)t("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(e.version&&e.version!==a.AMap.version)t("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var p=[];if(e.plugins)for(i=0;i<e.plugins.length;i+=1)a.AMap.plugins.indexOf(e.plugins[i])==-1&&p.push(e.plugins[i]);q(function(){p.length?window.AMap.plugin(p,function(){A(e).then(function(){s(window.AMap)}).catch(t)}):A(e).then(function(){s(window.AMap)}).catch(t)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},c={AMap:[],AMapUI:[],Loca:[]}}}})})(J);var $e=J.exports;const T=b=>(ae("data-v-5ac02676"),b=b(),te(),b),Se={class:"coordinate-acquisition-wraper"},Ve=le("\u67E5\u8BE2\u8DEF\u7EBF"),Pe=T(()=>E("p",null,"\u53EF\u5728\u63A7\u5236\u53F0\u67E5\u770B\u5B8C\u6574\u8DEF\u7EBF\u5BF9\u8C61",-1)),ze={class:"style-change"},Re=T(()=>E("span",null,"\u5730\u56FE\u4E3B\u9898\uFF1A",-1)),Ne=Z({__name:"Index",setup(b){const I=$(!0),A=$(!1),n=Q({keyword:"",coordinates:["116.303843,39.983412","116.407012,39.992093"],start:"116.303843,39.983412",end:"116.407012,39.992093",result:"",style:"light"}),z=[{label:"\u5E7B\u5F71\u9ED1",value:"dark"},{label:"\u6708\u5149\u94F6",value:"light"},{label:"\u8FDC\u5C71\u9EDB",value:"whitesmoke"},{label:"\u8349\u8272\u9752",value:"fresh"},{label:"\u96C5\u58EB\u7070",value:"grey"},{label:"\u6D82\u9E26",value:"graffiti"},{label:"\u9A6C\u5361\u9F99",value:"macaron"},{label:"\u975B\u9752\u84DD",value:"blue"},{label:"\u6781\u591C\u84DD",value:"darkblue"},{label:"\u9171\u7C7D",value:"wine"}];var o=null,a=null,u=null;const c=$(-1),B={coordinate:[{required:!0,message:"\u8BF7\u8F93\u5165\u7ECF\u7EAC\u5EA6"}]},q=X(()=>JSON.stringify(n.coordinates.map(d=>d.split(",").map(f=>+f)))),e=$(null);ee(()=>{r()});const s=()=>{e.value.innerHTML=""},t=()=>{n.keyword&&u.search(n.keyword)},l=()=>{let d="amap://styles/"+n.style;o.setMapStyle(d)},i=d=>{c.value===d?c.value=-1:c.value=d},m=d=>{n.coordinates.splice(d,1)};var p;const r=()=>{$e.load({key:"523c9fc07c690089f319101a72c2c13e",version:"2.0Beta",plugins:["AMap.DragRoute","AMap.PlaceSearch"]}).then(d=>{p=d,o=new d.Map("coordinate-acquisition",{zoom:5,mapStyle:`amap://styles/${n.style}`}),u=new d.PlaceSearch({pageSize:5,pageIndex:1,map:o,panel:"search-result",autoFitView:!0}),u.on("markerClick",()=>{o.setZoom(15)}),o.on("click",f=>{c.value!==-1&&(n.coordinates[c.value]=`${f.lnglat.lng},${f.lnglat.lat}`)})}).catch(d=>{console.log(d)})},_=$(null),F=()=>{_.value.validate(d=>{if(d){A.value=!0,a&&a.destroy();let f=n.coordinates.map(C=>C.split(","));a=new p.DragRoute(o,f,p.DrivingPolicy.LEAST_DISTANCE),a.search(),a.on("complete",({data:C,target:U})=>{A.value=!1,c.value=-1,n.coordinates=U._path.map(M=>`${M.lng},${M.lat}`);let D=a.getRoute(),L=D.map(M=>[M.lat,M.lng]);n.result=JSON.stringify(L);let x="font-size: 20px; font-weight: bold;font-family: \u5FAE\u8F6F\u96C5\u9ED1; color: #fff; text-shadow: 0 0 3px rgba(0, 0, 0, 1);";console.clear(),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u5BF9\u8C61  \u2193",x),console.log(C),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u6570\u7EC4  \u2193",x),console.log(D),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u7ECF\u7EAC\u5EA6  \u2193",x),console.log(L),console.log("%c\u884C\u8F66\u8DEF\u7EBF\u7ECF\u7EAC\u5EA6JSON\u4E32  \u2193",x),console.log(n.result)}),a.on("addway",({target:C})=>{c.value=-1,n.coordinates=C._path.map(U=>`${U.lng},${U.lat}`)})}})};return(d,f)=>{const C=De,U=Le,D=he,L=re,x=fe,M=pe,H=xe,K=de,W=se,Y=ce,G=ue;return oe((w(),k("div",Se,[E("div",{class:R(["filter-wrap",{expand:I.value}])},[v(D,{onClick:f[0]||(f[0]=g=>I.value=!I.value)},{default:y(()=>[I.value?(w(),S(C,{key:0})):(w(),S(U,{key:1}))]),_:1}),v(K,{class:"custom-scrollbar",model:n,ref_key:"form",ref:_,"label-width":"100"},{default:y(()=>[v(M,{label:"\u9009\u62E9\u5B9A\u4F4D\u4F4D\u7F6E"},{default:y(()=>[v(L,{type:"text",modelValue:n.keyword,"onUpdate:modelValue":f[1]||(f[1]=g=>n.keyword=g),onKeyup:ne(t,["native","enter"]),placeholder:"\u8BF7\u8F93\u5165\u4F4D\u7F6E",clearable:"",onClear:s},null,8,["modelValue","onKeyup"]),v(x,{icon:P(me),type:"primary",onClick:t},null,8,["icon"])]),_:1}),(w(!0),k(N,null,O(n.coordinates,(g,h)=>(w(),S(M,{label:`\u7ECF\u7EAC\u5EA6${h+1}`,key:h,rules:B.coordinate,prop:`coordinates.${h}`},{default:y(()=>[v(L,{type:"text",modelValue:n.coordinates[h],"onUpdate:modelValue":V=>n.coordinates[h]=V,icon:"md-navigate",placeholder:"\u8BF7\u8F93\u5165\u7ECF\u7EAC\u5EA6"},{suffix:y(()=>[v(D,{size:20,onClick:V=>i(h),color:c.value===h?"#409eff":""},{default:y(()=>[v(H)]),_:2},1032,["onClick","color"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),n.coordinates.length>2?(w(),S(x,{key:0,icon:P(ve),type:"danger",onClick:V=>m(h)},null,8,["icon","onClick"])):j("",!0),n.coordinates.length<15?(w(),S(x,{key:1,icon:P(ge),type:"primary",onClick:V=>{n.coordinates.splice(h+1,0,""),c.value=h+1}},null,8,["icon","onClick"])):j("",!0)]),_:2},1032,["label","rules","prop"]))),128)),v(x,{type:"primary",onClick:F},{default:y(()=>[Ve]),_:1}),v(M,{label:"\u7ECF\u7EAC\u5EA6\u6BB5\u5750\u6807"},{default:y(()=>[v(L,{type:"textarea",modelValue:P(q),"onUpdate:modelValue":f[2]||(f[2]=g=>ie(q)?q.value=g:null),readonly:"",rows:2},null,8,["modelValue"])]),_:1}),v(M,{label:"\u8FD4\u56DE\u8DEF\u7EBF\u5750\u6807"},{default:y(()=>[v(L,{type:"textarea",modelValue:n.result,"onUpdate:modelValue":f[3]||(f[3]=g=>n.result=g),readonly:"",rows:3},null,8,["modelValue"])]),_:1}),Pe]),_:1},8,["model"])],2),E("div",ze,[Re,v(Y,{modelValue:n.style,"onUpdate:modelValue":f[4]||(f[4]=g=>n.style=g),onChange:l},{default:y(()=>[(w(),k(N,null,O(z,(g,h)=>v(W,{label:g.label,value:g.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),E("div",{class:"search-result custom-scrollbar",id:"search-result",ref_key:"searchResult",ref:e},null,512),E("div",{class:R(["coordinate-acquisition",{active:c.value!==-1}]),id:"coordinate-acquisition"},null,2)])),[[G,A.value]])}}});var lo=_e(Ne,[["__scopeId","data-v-5ac02676"]]);export{lo as default};
